function import$(r,e){var a,n={}.hasOwnProperty;for(a in e)n.call(e,a)&&(r[a]=e[a]);return r}(function(){var r,m,z,w,u,a,e,n,t,k=this,r=[{},{},{}],m=r[0],z=r[1],w=r[2],u={"bli-idv":.2,"bli-com":.7,"bli-gov":.1,"nhi-2nd":.0211,"普通保費":.11,"就業保費":.01,"工資墊償":.025*.01};return this.rates=import$({},u),a=function(a){var r,e,n;r=new Promise(function(e,r){return Papa.parse("assets/data/nhi-"+a+"-boss.csv",{download:true,header:true,dynamicTyping:true,complete:function(r){m.boss=r.data;m.boss.sort(function(r,e){return r.salary-e.salaray});return e()}})});e=new Promise(function(e,r){return Papa.parse("assets/data/nhi-"+a+"-worker.csv",{download:true,header:true,dynamicTyping:true,complete:function(r){m.worker=r.data;m.worker.sort(function(r,e){return r.salary-e.salaray});return e()}})});n=new Promise(function(e,r){return Papa.parse("assets/data/bli-"+a+".csv",{download:true,header:true,dynamicTyping:true,complete:function(r){z.worker=r.data.filter(function(r){return r.salary});z.worker.sort(function(r,e){return r.salary-e.salaray});return e()}})});return Promise.all([r,e,n])},e=function(e){return a(e).then(function(){return ld$.fetch("/assets/data/"+e+".json",{method:"GET"},{type:"json"})}).then(function(r){k.rates=import$(import$({},u),r);w["salary"].value=k.rates["最低薪資"];w["salary"].setAttribute("placeholder",e+"年最低薪資為"+k.rates["最低薪資"]+"元");return w["disaster-rate"].value=k.rates["職災費率"]}).then(function(){return t()})},["year","salary","family-count","is-boss","pay","bli-idv","bli-com","bli-salary","bli","bli-ret","nhi-idv","nhi-com","nhi","disaster-rate","bill-total","prize","prize-minus","prize-pretax","prize-nhi1","prize-nhi2","prize-real","prize-spend"].map(function(r){return w[r]=ld$.find(document,"*[data-var="+r+"]",0)}),w.salary.addEventListener("keyup",function(){return t()}),w["family-count"].addEventListener("change",function(){return t()}),w["is-boss"].addEventListener("click",function(){return t()}),w["is-boss"].addEventListener("input",function(){return t()}),w["disaster-rate"].addEventListener("input",function(){return t()}),w["year"].addEventListener("change",function(){return e(w["year"].value)}),w["prize"].addEventListener("keyup",function(){return n()}),w["prize-minus"].addEventListener("keyup",function(){return n()}),n=function(){var r,e,a,n,t,i;r=+(w["prize"].value||0);e=+(w["prize-minus"].value||0)*4;w["prize-pretax"].value=a=Math.floor(r*.05);w["prize-nhi1"].value=n=Math.round(((t=r-e)>0?t:0)*u["nhi-2nd"]);w["prize-nhi2"].value=i=Math.round(r*u["nhi-2nd"]);w["prize-real"].value=r-a-n;return w["prize-spend"].value=r+i},t=function(){var e,a,r,n,t,i,u,l,s,o,d,c,v,p,f,h,y,b;e=+w.salary.value;a=(z.worker.filter(function(r){return r.salary>=e})[0]||(r=z.worker)[r.length-1]).salary;n=w["is-boss"].checked;t=[k.rates["普通保費"],k.rates["就業保費"],+w["disaster-rate"].value*.01].map(function(r){return a*r});i=Math.round(t[0]*k.rates["bli-idv"]);u=Math.round((n?0:t[1])*k.rates["bli-idv"]);l=Math.round(t[0]*k.rates["bli-com"]);s=Math.round((n?0:t[1])*k.rates["bli-com"]);o=Math.round(t[2]);w["bli-idv"].value=d=i+u;w["bli-com"].value=l+s+o;w["bli-salary"].value=n?0:Math.round(e*k.rates["工資墊償"]);w["bli-ret"].value=n?0:Math.round(e*.06);w.bli.value=+w["bli-idv"].value+ +w["bli-com"].value+ +w["bli-salary"].value;c=n?m.boss:m.worker;if(c)for(v=c.length-1;v>=0;--v){p=v;f=c[p];if(!(f.salary!=null)||f.salary>e)continue;h=+w["family-count"].value;y=f["p"+h];b=f["com"]||0;w["nhi-idv"].value=y;w["nhi-com"].value=b;w["nhi"].value=y+b;d+=y;break}w["pay"].value=e-d;return w["bill-total"].value=[w["nhi"].value,w["bli"].value,w["bli-ret"].value].reduce(function(r,e){return r+ +e},0)},e(112)}).apply({});