function import$(e,r){var a,n={}.hasOwnProperty;for(a in r)n.call(r,a)&&(e[a]=r[a]);return e}!function(){var e,m,z,w,u,a,r,n,t,k=this,e=[{},{},{}],m=e[0],z=e[1],w=e[2],u={"bli-idv":.2,"bli-com":.7,"bli-gov":.1,"nhi-2nd":.0211,"普通保費":.11,"就業保費":.01,"工資墊償":.025*.01};return this.rates=import$({},u),a=function(a){var e,r,n;e=new Promise(function(r,e){return Papa.parse("assets/data/nhi-"+a+"-boss.csv",{download:true,header:true,dynamicTyping:true,complete:function(e){m.boss=e.data;m.boss.sort(function(e,r){return e.salary-r.salaray});return r()}})});r=new Promise(function(r,e){return Papa.parse("assets/data/nhi-"+a+"-worker.csv",{download:true,header:true,dynamicTyping:true,complete:function(e){m.worker=e.data;m.worker.sort(function(e,r){return e.salary-r.salaray});return r()}})});n=new Promise(function(r,e){return Papa.parse("assets/data/bli-"+a+".csv",{download:true,header:true,dynamicTyping:true,complete:function(e){z.worker=e.data.filter(function(e){return e.salary});z.worker.sort(function(e,r){return e.salary-r.salaray});return r()}})});return Promise.all([e,r,n])},r=function(r){ld$.find(document,"*[data-var=year]",0).value=r;return a(r).then(function(){return ld$.fetch("/assets/data/"+r+".json",{method:"GET"},{type:"json"})}).then(function(e){k.rates=import$(import$({},u),e);w["salary"].value=k.rates["最低薪資"];w["salary"].setAttribute("placeholder",r+"年最低薪資為"+k.rates["最低薪資"]+"元");return w["disaster-rate"].value=k.rates["職災費率"]}).then(function(){return t()})},["year","salary","family-count","is-boss","pay","bli-idv","bli-com","bli-salary","bli","bli-ret","nhi-idv","nhi-com","nhi","disaster-rate","bill-total","prize","prize-minus","prize-pretax","prize-nhi1","prize-nhi2","prize-real","prize-spend"].map(function(e){return w[e]=ld$.find(document,"*[data-var="+e+"]",0)}),w.salary.addEventListener("keyup",function(){return t()}),w["family-count"].addEventListener("change",function(){return t()}),w["is-boss"].addEventListener("click",function(){return t()}),w["is-boss"].addEventListener("input",function(){return t()}),w["disaster-rate"].addEventListener("input",function(){return t()}),w["year"].addEventListener("change",function(){return r(w["year"].value)}),w["prize"].addEventListener("keyup",function(){return n()}),w["prize-minus"].addEventListener("keyup",function(){return n()}),n=function(){var e,r,a,n,t,i;e=+(w["prize"].value||0);r=+(w["prize-minus"].value||0)*4;w["prize-pretax"].value=a=Math.floor(e*.05);w["prize-nhi1"].value=n=Math.round(((t=e-r)>0?t:0)*u["nhi-2nd"]);w["prize-nhi2"].value=i=Math.round(e*u["nhi-2nd"]);w["prize-real"].value=e-a-n;return w["prize-spend"].value=e+i},t=function(){var r,a,e,n,t,i,u,l,o,s,d,c,v,p,f,h,y,b;r=+w.salary.value;a=(z.worker.filter(function(e){return e.salary>=r})[0]||(e=z.worker)[e.length-1]).salary;n=w["is-boss"].checked;t=[k.rates["普通保費"],k.rates["就業保費"],+w["disaster-rate"].value*.01].map(function(e){return a*e});i=Math.round(t[0]*k.rates["bli-idv"]);u=Math.round((n?0:t[1])*k.rates["bli-idv"]);l=Math.round(t[0]*k.rates["bli-com"]);o=Math.round((n?0:t[1])*k.rates["bli-com"]);s=Math.round(t[2]);w["bli-idv"].value=d=i+u;w["bli-com"].value=l+o+s;w["bli-salary"].value=n?0:Math.round(r*k.rates["工資墊償"]);w["bli-ret"].value=n?0:Math.round(r*.06);w.bli.value=+w["bli-idv"].value+ +w["bli-com"].value+ +w["bli-salary"].value;c=n?m.boss:m.worker;if(c)for(v=c.length-1;v>=0;--v){p=v;f=c[p];if(!(f.salary!=null)||f.salary>r)continue;h=+w["family-count"].value;y=f["p"+h];b=f["com"]||0;w["nhi-idv"].value=y;w["nhi-com"].value=b;w["nhi"].value=y+b;d+=y;break}w["pay"].value=r-d;return w["bill-total"].value=[w["nhi"].value,w["bli"].value,w["bli-ret"].value].reduce(function(e,r){return e+ +r},0)},r(113)}.apply({});