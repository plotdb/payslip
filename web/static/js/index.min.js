function import$(e,r){var n,t={}.hasOwnProperty;for(n in r)t.call(r,n)&&(e[n]=r[n]);return e}!function(){var e,m,k,z,u,n,r,t,a,w=this,e=[{},{},{}],m=e[0],k=e[1],z=e[2],u={"bli-idv":.2,"bli-com":.7,"bli-gov":.1,"nhi-2nd":.0211,"普通保費":.11,"就業保費":.01,"工資墊償":.025*.01};return this.rates=import$({},u),n=function(n){var e,r,t;e=new Promise(function(r,e){return Papa.parse("assets/data/nhi-"+n+"-boss.csv",{download:true,header:true,dynamicTyping:true,complete:function(e){m.boss=e.data;m.boss.sort(function(e,r){return e.salary-r.salaray});return r()}})});r=new Promise(function(r,e){return Papa.parse("assets/data/nhi-"+n+"-worker.csv",{download:true,header:true,dynamicTyping:true,complete:function(e){m.worker=e.data;m.worker.sort(function(e,r){return e.salary-r.salaray});return r()}})});t=new Promise(function(r,e){return Papa.parse("assets/data/bli-"+n+".csv",{download:true,header:true,dynamicTyping:true,complete:function(e){k.worker=e.data.filter(function(e){return e.salary});k.worker.sort(function(e,r){return e.salary-r.salaray});return r()}})});return Promise.all([e,r,t])},r=function(r){ld$.find(document,"*[data-var=year]",0).value=r;return n(r).then(function(){return ld$.fetch("/assets/data/"+r+".json",{method:"GET"},{type:"json"})}).then(function(e){w.rates=import$(import$({},u),e);z["salary"].value=w.rates["最低薪資"];z["salary"].setAttribute("placeholder",r+"年最低薪資為"+w.rates["最低薪資"]+"元");return z["disaster-rate"].value=w.rates["職災費率"]}).then(function(){return a()})},["year","salary","family-count","is-boss","bonus-4timed","pay","bli-idv","bli-com","bli-salary","bli","bli-ret","nhi-idv","nhi-com","nhi","disaster-rate","bill-total","prize","prize-minus","prize-pretax","prize-nhi1","prize-nhi2","prize-real","prize-spend"].map(function(e){return z[e]=ld$.find(document,"*[data-var="+e+"]",0)}),z.salary.addEventListener("keyup",function(){return a()}),z["family-count"].addEventListener("change",function(){return a()}),z["is-boss"].addEventListener("click",function(){return a()}),z["is-boss"].addEventListener("input",function(){return a()}),z["bonus-4timed"].addEventListener("click",function(){return t()}),z["bonus-4timed"].addEventListener("input",function(){return t()}),z["disaster-rate"].addEventListener("input",function(){return a()}),z["year"].addEventListener("change",function(){return r(z["year"].value)}),z["prize"].addEventListener("keyup",function(){return t()}),z["prize-minus"].addEventListener("keyup",function(){return t()}),t=function(){var e,r,n,t,a,i;e=+(z["prize"].value||0);r=+(z["prize-minus"].value||0)*4;if(z["bonus-4timed"].checked)r=0;z["prize-pretax"].value=n=Math.floor(e*.05);z["prize-nhi1"].value=t=Math.round(((a=e-r)>0?a:0)*u["nhi-2nd"]);z["prize-nhi2"].value=i=Math.round(e*u["nhi-2nd"]);z["prize-real"].value=e-n-t;return z["prize-spend"].value=e+i},a=function(){var r,n,e,t,a,i,u,o,s,l,d,c,v,p,f,h,y,b;r=+z.salary.value;n=(k.worker.filter(function(e){return e.salary>=r})[0]||(e=k.worker)[e.length-1]).salary;t=z["is-boss"].checked;a=[w.rates["普通保費"],w.rates["就業保費"],+z["disaster-rate"].value*.01].map(function(e){return n*e});i=Math.round(a[0]*w.rates["bli-idv"]);u=Math.round((t?0:a[1])*w.rates["bli-idv"]);o=Math.round(a[0]*w.rates["bli-com"]);s=Math.round((t?0:a[1])*w.rates["bli-com"]);l=Math.round(a[2]);z["bli-idv"].value=d=i+u;z["bli-com"].value=o+s+l;z["bli-salary"].value=t?0:Math.round(r*w.rates["工資墊償"]);z["bli-ret"].value=t?0:Math.round(r*.06);z.bli.value=+z["bli-idv"].value+ +z["bli-com"].value+ +z["bli-salary"].value;c=t?m.boss:m.worker;if(c)for(v=c.length-1;v>=0;--v){p=v;f=c[p];if(!(f.salary!=null)||f.salary>r)continue;h=+z["family-count"].value;y=f["p"+h];b=f["com"]||0;z["nhi-idv"].value=y;z["nhi-com"].value=b;z["nhi"].value=y+b;d+=y;break}z["pay"].value=r-d;return z["bill-total"].value=[z["nhi"].value,z["bli"].value,z["bli-ret"].value].reduce(function(e,r){return e+ +r},0)},r(113)}.apply({});