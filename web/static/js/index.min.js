function import$(e,r){var n,a={}.hasOwnProperty;for(n in r)a.call(r,n)&&(e[n]=r[n]);return e}(function(){var e,f,h,y,u,n,r,a,t,b=this,e=[{},{},{}],f=e[0],h=e[1],y=e[2],u={"bli-idv":.2,"bli-com":.7,"bli-gov":.1,"nhi-2nd":.0211,"普通保費":.11,"就業保費":.01,"工資墊償":.025*.01};return this.rates=import$({},u),n=function(n){var e,r,a;e=new Promise(function(r,e){return Papa.parse("assets/data/nhi-"+n+"-boss.csv",{download:true,header:true,dynamicTyping:true,complete:function(e){f.boss=e.data;f.boss.sort(function(e,r){return e.salary-r.salaray});return r()}})});r=new Promise(function(r,e){return Papa.parse("assets/data/nhi-"+n+"-worker.csv",{download:true,header:true,dynamicTyping:true,complete:function(e){f.worker=e.data;f.worker.sort(function(e,r){return e.salary-r.salaray});return r()}})});a=new Promise(function(r,e){return Papa.parse("assets/data/bli-"+n+".csv",{download:true,header:true,dynamicTyping:true,complete:function(e){h.worker=e.data.filter(function(e){return e.salary});h.worker.sort(function(e,r){return e.salary-r.salaray});return r()}})});return Promise.all([e,r,a])},r=function(r){return n(r).then(function(){return ld$.fetch("/assets/data/"+r+".json",{method:"GET"},{type:"json"})}).then(function(e){b.rates=import$(import$({},u),e);y["salary"].value=b.rates["最低薪資"];y["salary"].setAttribute("placeholder",r+"年最低薪資為"+b.rates["最低薪資"]+"元");return y["disaster-rate"].value=b.rates["職災費率"]}).then(function(){return t()})},["year","salary","family-count","is-boss","pay","bli-idv","bli-com","bli-salary","bli","bli-ret","nhi-idv","nhi-com","nhi","disaster-rate","bill-total","prize","prize-minus","prize-pretax","prize-nhi1","prize-nhi2","prize-real","prize-spend"].map(function(e){return y[e]=ld$.find(document,"*[data-var="+e+"]",0)}),y.salary.addEventListener("keyup",function(){return t()}),y["family-count"].addEventListener("change",function(){return t()}),y["is-boss"].addEventListener("click",function(){return t()}),y["is-boss"].addEventListener("input",function(){return t()}),y["disaster-rate"].addEventListener("input",function(){return t()}),y["year"].addEventListener("change",function(){return r(y["year"].value)}),y["prize"].addEventListener("keyup",function(){return a()}),y["prize-minus"].addEventListener("keyup",function(){return a()}),a=function(){var e,r,n,a,t,i;e=+(y["prize"].value||0);r=+(y["prize-minus"].value||0)*4;y["prize-pretax"].value=n=Math.floor(e*.05);y["prize-nhi1"].value=a=Math.round(((t=e-r)>0?t:0)*u["nhi-2nd"]);y["prize-nhi2"].value=i=Math.round(e*u["nhi-2nd"]);y["prize-real"].value=e-n-a;return y["prize-spend"].value=e+i},t=function(){var r,n,e,a,t,i,u,l,s,o,d,c,v,p;r=+y.salary.value;n=(h.worker.filter(function(e){return e.salary>=r})[0]||(e=h.worker)[e.length-1]).salary;a=y["is-boss"].checked;t=[b.rates["普通保費"],b.rates["就業保費"],+y["disaster-rate"].value*.01].map(function(e){return n*e});i=t[0]+(a?0:t[1]);y["bli-idv"].value=u=Math.round(i*b.rates["bli-idv"]);y["bli-com"].value=Math.round(i*b.rates["bli-com"])+Math.round(t[2]);y["bli-salary"].value=a?0:Math.round(r*b.rates["工資墊償"]);y["bli-ret"].value=a?0:Math.round(r*.06);y.bli.value=+y["bli-idv"].value+ +y["bli-com"].value+ +y["bli-salary"].value;l=a?f.boss:f.worker;if(l)for(s=l.length-1;s>=0;--s){o=s;d=l[o];if(!(d.salary!=null)||d.salary>r)continue;c=+y["family-count"].value;v=d["p"+c];p=d["com"]||0;y["nhi-idv"].value=v;y["nhi-com"].value=p;y["nhi"].value=v+p;u+=v;break}y["pay"].value=r-u;return y["bill-total"].value=[y["nhi"].value,y["bli"].value,y["bli-ret"].value].reduce(function(e,r){return e+ +r},0)},r(112)}).apply({});