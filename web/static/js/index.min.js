function import$(r,e){var a,t={}.hasOwnProperty;for(a in e)t.call(e,a)&&(r[a]=e[a]);return r}(function(){var r,y,b,h,a,t,e,n,m=this,r=[{},{},{}],y=r[0],b=r[1],h=r[2],a={"bli-idv":.2,"bli-com":.7,"bli-gov":.1,"普通保費":.105,"就業保費":.01,"工資墊償":.025*.01};return this.rates=import$({},a),t=function(a){var r,e,t;r=new Promise(function(e,r){return Papa.parse("assets/data/nhi-"+a+"-boss.csv",{download:true,header:true,dynamicTyping:true,complete:function(r){y.boss=r.data;y.boss.sort(function(r,e){return r.salary-e.salaray});return e()}})});e=new Promise(function(e,r){return Papa.parse("assets/data/nhi-"+a+"-worker.csv",{download:true,header:true,dynamicTyping:true,complete:function(r){y.worker=r.data;y.worker.sort(function(r,e){return r.salary-e.salaray});return e()}})});t=new Promise(function(e,r){return Papa.parse("assets/data/bli-"+a+".csv",{download:true,header:true,dynamicTyping:true,complete:function(r){b.worker=r.data.filter(function(r){return r.salary});b.worker.sort(function(r,e){return r.salary-e.salaray});return e()}})});return Promise.all([r,e,t])},e=function(e){return t(e).then(function(){return ld$.fetch("/assets/data/"+e+".json",{method:"GET"},{type:"json"})}).then(function(r){m.rates=import$(import$({},a),r);h["salary"].value=m.rates["最低薪資"];h["salary"].setAttribute("placeholder",e+"年最低薪資為"+m.rates["最低薪資"]+"元");return h["disaster-rate"].value=m.rates["職災費率"]}).then(function(){return n()})},["year","salary","family-count","is-boss","pay","bli-idv","bli-com","bli-salary","bli","bli-ret","nhi-idv","nhi-com","nhi","disaster-rate","bill-total"].map(function(r){return h[r]=ld$.find(document,"*[data-var="+r+"]",0)}),h.salary.addEventListener("keyup",function(){return n()}),h["family-count"].addEventListener("change",function(){return n()}),h["is-boss"].addEventListener("click",function(){return n()}),h["is-boss"].addEventListener("input",function(){return n()}),h["disaster-rate"].addEventListener("input",function(){return n()}),h["year"].addEventListener("change",function(){return e(h["year"].value)}),n=function(){var e,a,r,t,n,i,u,s,l,o,c,d,v,f;e=+h.salary.value;a=(b.worker.filter(function(r){return r.salary>=e})[0]||(r=b.worker)[r.length-1]).salary;t=h["is-boss"].checked;n=[m.rates["普通保費"],m.rates["就業保費"],+h["disaster-rate"].value*.01].map(function(r){return a*r});i=n[0]+(t?0:n[1]);h["bli-idv"].value=u=Math.round(i*m.rates["bli-idv"]);h["bli-com"].value=Math.round(i*m.rates["bli-com"])+Math.round(n[2]);h["bli-salary"].value=t?0:Math.round(e*m.rates["工資墊償"]);h["bli-ret"].value=t?0:Math.round(e*.06);h.bli.value=+h["bli-idv"].value+ +h["bli-com"].value+ +h["bli-salary"].value;s=t?y.boss:y.worker;if(s)for(l=s.length-1;l>=0;--l){o=l;c=s[o];if(!(c.salary!=null)||c.salary>e)continue;d=+h["family-count"].value;v=c["p"+d];f=c["com"]||0;h["nhi-idv"].value=v;h["nhi-com"].value=f;h["nhi"].value=v+f;u+=v;break}h["pay"].value=e-u;return h["bill-total"].value=[h["nhi"].value,h["bli"].value,h["bli-ret"].value].reduce(function(r,e){return r+ +e},0)},e(111)}).apply({});