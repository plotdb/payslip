function import$(e,r){var n,t={}.hasOwnProperty;for(n in r)t.call(r,n)&&(e[n]=r[n]);return e}!function(){var e,g,L,E,u,n,r,t,a,M=this,e=[{},{},{}],g=e[0],L=e[1],E=e[2],u={"bli-idv":.2,"bli-com":.7,"bli-gov":.1,"nhi-2nd":.0211,"普通保費":.11,"就業保費":.01,"工資墊償":.025*.01};return this.rates=import$({},u),n=function(n){var e,r,t;e=new Promise(function(r,e){return Papa.parse("assets/data/nhi-"+n+"-boss.csv",{download:true,header:true,dynamicTyping:true,complete:function(e){g.boss=e.data;g.boss.sort(function(e,r){return e.salary-r.salaray});return r()}})});r=new Promise(function(r,e){return Papa.parse("assets/data/nhi-"+n+"-worker.csv",{download:true,header:true,dynamicTyping:true,complete:function(e){g.worker=e.data;g.worker.sort(function(e,r){return e.salary-r.salaray});return r()}})});t=new Promise(function(r,e){return Papa.parse("assets/data/bli-"+n+".csv",{download:true,header:true,dynamicTyping:true,complete:function(e){L.worker=e.data.filter(function(e){return e.salary});L.worker.sort(function(e,r){return e.salary-r.salaray});return r()}})});return Promise.all([e,r,t])},r=function(r){ld$.find(document,"*[data-var=year]",0).value=r;return n(r).then(function(){return ld$.fetch("/assets/data/"+r+".json",{method:"GET"},{type:"json"})}).then(function(e){M.rates=import$(import$({},u),e);E["salary"].value=M.rates["最低薪資"];E["salary"].setAttribute("placeholder",r+"年最低薪資為"+M.rates["最低薪資"]+"元");return E["disaster-rate"].value=M.rates["職災費率"]}).then(function(){return a()})},["year","salary","family-count","is-boss","bonus-4timed","pay","bli-idv","bli-com","bli-salary","bli","bli-ret","nhi-idv","nhi-com","nhi","disaster-rate","bill-total","prize","prize-minus","prize-pretax","prize-nhi1","prize-nhi2","prize-real","prize-spend"].map(function(e){return E[e]=ld$.find(document,"*[data-var="+e+"]",0)}),E.salary.addEventListener("keyup",function(){return a()}),E["family-count"].addEventListener("change",function(){return a()}),E["is-boss"].addEventListener("click",function(){return a()}),E["is-boss"].addEventListener("input",function(){return a()}),E["bonus-4timed"].addEventListener("click",function(){return t()}),E["bonus-4timed"].addEventListener("input",function(){return t()}),E["disaster-rate"].addEventListener("input",function(){return a()}),E["year"].addEventListener("change",function(){return r(E["year"].value)}),E["prize"].addEventListener("keyup",function(){return t()}),E["prize-minus"].addEventListener("keyup",function(){return t()}),t=function(){var e,r,n,t,a,i;e=+(E["prize"].value||0);r=+(E["prize-minus"].value||0)*4;if(E["bonus-4timed"].checked)r=0;E["prize-pretax"].value=n=Math.floor(e*.05);E["prize-nhi1"].value=t=Math.round(((a=e-r)>0?a:0)*u["nhi-2nd"]);E["prize-nhi2"].value=i=Math.round(e*u["nhi-2nd"]);E["prize-real"].value=e-n-t;return E["prize-spend"].value=e+i},a=function(){var r,e,n,t,a,i,u,s,l,o,d,c,v,p,f,h,y,b,m,k,w,z;r=+E.salary.value;e=E["is-boss"].checked;n=(L.worker.filter(function(e){return e.salary>=r})[0]||(t=L.worker)[t.length-1]).salary;a=e?g.boss:g.worker;i=(a.filter(function(e){return e.salary>=r})[0]||a[a.length-1]).salary;u=document.querySelector('[ld="nhi-boss-salary-mod"]');s=document.querySelector('[ld="nhi-salary"]');u.classList.toggle("d-none",true);if(M.rates["雇主健保最低投保薪資"]!=null&&e&&i<M.rates["雇主健保最低投保薪資"]){i=M.rates["雇主健保最低投保薪資"];u.classList.toggle("d-none",false);s.textContent=i}l=[M.rates["普通保費"],M.rates["就業保費"],+E["disaster-rate"].value*.01].map(function(e){return n*e});o=Math.round(l[0]*M.rates["bli-idv"]);d=Math.round((e?0:l[1])*M.rates["bli-idv"]);c=Math.round(l[0]*M.rates["bli-com"]);v=Math.round((e?0:l[1])*M.rates["bli-com"]);p=Math.round(l[2]);E["bli-idv"].value=f=o+d;E["bli-com"].value=c+v+p;E["bli-salary"].value=e?0:Math.round(r*M.rates["工資墊償"]);E["bli-ret"].value=e?0:Math.round(r*.06);E.bli.value=+E["bli-idv"].value+ +E["bli-com"].value+ +E["bli-salary"].value;h=e?g.boss:g.worker;if(h)for(y=h.length-1;y>=0;--y){b=y;m=h[b];if(!(m.salary!=null)||m.salary>i)continue;k=+E["family-count"].value;w=m["p"+k];z=m["com"]||0;E["nhi-idv"].value=w;E["nhi-com"].value=z;E["nhi"].value=w+z;f+=w;console.log(i);break}E["pay"].value=r-f;return E["bill-total"].value=[E["nhi"].value,E["bli"].value,E["bli-ret"].value].reduce(function(e,r){return e+ +r},0)},r(114)}.apply({});